@model ReversiApp.Models.Spel

@{
    ViewData["Title"] = "Game";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

    <div>
        <h4>Omschrijving: @Html.DisplayFor(model => model.Omschrijving)</h4>
        <h4>
            Spelers:
            @foreach (var speler in Model.Spelers)
            {
                <p>@speler.Email (Highscore: @speler.Highscore, kleur: @speler.Kleur)</p>
            }
        </h4>
        @if (ViewBag.Gewonnen == null)
        {
            <div>
                @if (Model.Spelers.Count == 1)
                {
                    <a asp-action="Edit" asp-route-id="@Model.ID" class="btn btn-primary">Aanpassen</a>
                }
                else
                {
                    <form asp-action="WhiteWon">
                        <input type="hidden" asp-for="ID" />
                        <input type="submit" value="Wit wint" class="btn btn-light" />
                    </form>
                    <form asp-action="BlackWon">
                        <input type="hidden" asp-for="ID" />
                        <input type="submit" value="Zwart wint" class="btn btn-dark" />
                    </form>
                }
                <form asp-action="Delete">
                    <input type="hidden" asp-for="ID" />
                    <input type="submit" value="Dit spel verlaten & verwijderen" class="btn btn-danger" />
                </form>
            </div>
            @if (Model.Spelers.Count == 2)
            {
                <!--<form asp-action="Action">
                <input type="hidden" asp-for="ID" />
                <div class="form-group">
                    <label asp-for="Kolom" class="control-label"></label>
                    <input asp-for="Kolom" class="form-control" />
                    <span asp-validation-for="Kolom" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Rij" class="control-label"></label>
                    <input asp-for="Rij" class="form-control" />
                    <span asp-validation-for="Rij" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <input type="submit" value="Doe een zet" class="btn btn-primary" />
                </div>
            </form>-->
                <div class="game" style="margin-bottom: 50px;">

                </div>
            }
        }
        else if (ViewBag.Gewonnen)
        {
            <h4>U heeft gewonnen! Je highscore is omhoog gegaan.</h4>
            <form asp-action="Leave">
                <input type="hidden" asp-for="ID" />
                <input type="submit" value="Dit spel verlaten" class="btn btn-danger" />
            </form>
        }
        else
        {
            <h4>U heeft verloren! Je highscore is hetzelfde gebleven.</h4>
            <form asp-action="Leave">
                <input type="hidden" asp-for="ID" />
                <input type="submit" value="Dit spel verlaten" class="btn btn-danger" />
            </form>
        }
    </div>
@section scripts {
    <script type="text/javascript">
        $(".game").append(spa_templates.templates.speelbord.speelbord({
            bord: @Html.DisplayFor(model => model.SerializedBord)
        }));

        Game.Stats.init("production");
    </script>
}
