"use strict";var urlForApi="/api/url",weatherUrl="http://api.openweathermap.org/data/2.5/weather?q=zwolle&apikey=399c599ecf66641be477a03109aef585",Game=function(e){var t={apiUrl:e,id:0,aanDeBeurt:"geen",kleur:"wit"},n=function(){Game.Data.get("api/Spel/IsBezig/".concat(t.id)).then(function(e){e?(Game.Data.get("api/Spel/Speelbord/".concat(t.id)).then(function(e){$(".game").html(Game.Template.parseTemplates("speelbord.speelbord",{bord:e}))}),Game.Data.get("api/Spel/AanDeBeurt/".concat(t.id)).then(function(e){t.aanDeBeurt=e,1===e?(t.aanDeBeurt="wit",$(".aanDeBeurt").html("De kleur wit is aan de beurt!")):2===e&&(t.aanDeBeurt="zwart",$(".aanDeBeurt").html("De kleur zwart is aan de beurt!"))})):location.reload()})};return{init:function(e,a){t.id=e,1===a?t.kleur="wit":2===a&&(t.kleur="zwart"),window.setInterval(n,2e3)},configMap:t}}(urlForApi);Game.Stats=function(){var e={chartData:{type:"bar",data:{labels:["Speler1","Speler2"],datasets:[{label:"Aantal gewonnen games",data:[12,19,3,5,2,3],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}},t={environment:"production"},n=function(t){var n=e.mock;return new Promise(function(e,t){e(n)})},a=function(){return"development"!==t.environment?$.get().then(function(e){return e}).catch(function(e){console.log(e.message)}):n()};return{init:function(n){if("production"!==n)t.environment=n;else{if("development"===n)throw new Error("environment is niet correct meegegeven!");var a=document.getElementById("myChart").getContext("2d");new Chart(a,e.chartData)}},updateChart:a}}(),Game.API=function(){return{getRandomFact:function(){return Game.Data.get("https://uselessfacts.jsph.pl/random.json")}}}(),Game.Data=function(){var e={mock:[{url:"api/Spel/Speelbord/0",data:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1,2,0,0,0],[0,0,0,2,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},{url:"api/Spel/IsBezig/0",data:!0},{url:"api/Spel/AanDeBeurt/0",data:1}]},t={environment:"production"},n=function(t){var n=e.mock.find(function(e){return e.url===t});return new Promise(function(e,t){e(n.data)})},a=function(e){return"development"!==t.environment?(e.startsWith("api")&&(e="https://"+window.location.href.split("/")[2]+"/"+e),$.get(e).then(function(e){return e}).catch(function(e){console.log(e.message)})):n(e)},r=function(e,n){if("development"!==t.environment)return e="https://"+window.location.href.split("/")[2]+"/"+e,$.ajax({url:e,method:"PUT",contentType:"application/json",dataType:"text",data:JSON.stringify(n)})};return{init:function(n){if("production"!==n)t.environment=n;else{if("development"===n)throw new Error("environment is niet correct meegegeven!");console.log(e.mock.indexOf(url))}},get:a,put:r,stateMap:t}}(),Game.Model=function(){var e=function(){Game.Data.get(weatherUrl).then(function(e){return console.log(e)})},t=function(){var e=1;if(0!==e&&1!==e&&2!==e)throw new Error("Dit is niet een juiste beurt!");return e},n=function(){console.log("Doing private stuff")};return{init:function(){n()},getWeather:e,_getGameState:t}}();var elementIdVoorSpelbord="spelbord";Game.Reversi=function(e){var t={elementId:e},n=function(e,n){if(Game.configMap.aanDeBeurt===Game.configMap.kleur)if("development"!==Game.Data.stateMap.environment)var r=Game.Data.put("api/Spel/ZetMogelijk/",{id:Game.configMap.id,rij:n,kolom:e}).always(function(){204===r.status?(a(),document.getElementById("spelbord__veld"+e+n).innerHTML="<div class='fishie fadeIn "+t.kleur+"'></div>",Game.Data.get("api/Spel/Speelbord/".concat(Game.configMap.id)).then(function(e){$(".game").html(spa_templates.templates.speelbord.speelbord({bord:e}))}),Game.Data.get("api/Spel/AanDeBeurt/".concat(Game.configMap.id)).then(function(e){t.aanDeBeurt=e,1===e?(t.aanDeBeurt="wit",$(".aanDeBeurt").html("De kleur wit is aan de beurt!")):2===e&&(t.aanDeBeurt="zwart",$(".aanDeBeurt").html("De kleur zwart is aan de beurt!"))}),"wit"===t.kleur?t.kleur="zwart":"zwart"===t.kleur&&(t.kleur="wit")):alert("Het is niet mogelijk om op rij "+n+" en kolom "+e+" neer te zetten!")});else document.getElementById("spelbord__veld"+e+n).innerHTML="<div class='fishie fadeIn "+t.kleur+"'></div>","wit"===t.kleur?t.kleur="zwart":"zwart"===t.kleur&&(t.kleur="wit");else alert("U bent momenteel niet aan de beurt!")},a=function(){Game.API.getRandomFact().then(function(e){$(".randomFact").html(Game.Template.parseTemplates("randomFacts.randomFacts",{language:e.language,fact:e.text}))})};return{showFishie:n,configMap:t,laadRandomFact:a}}(elementIdVoorSpelbord),Game.Template=function(){var e=function(e){var t=e.split("."),n=spa_templates.templates;return t.forEach(function(e){n=n[e]}),n};return{parseTemplates:function(t,n){return e(t)(n)}}}();